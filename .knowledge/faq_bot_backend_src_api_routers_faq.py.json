{"is_source_file": true, "format": "Python", "description": "This file defines an API endpoint using FastAPI for answering FAQs with a Retrieval-Augmented Generation (RAG) pipeline. It sets up the router, service instances, request/response models, and the handler function for generating answers based on user queries.", "external_files": ["../services/rag", "../services/ai_service", "../config/settings"], "external_methods": ["get_settings", "RagPipeline.retrieve", "RagPipeline.generate_with_context", "AIService.get_active_model"], "published": ["get_answer"], "classes": [{"name": "FaqAnswerRequest", "description": "Request model for user queries, includes the question and top_k parameter for context retrieval."}, {"name": "ContextChunk", "description": "Data model for context snippets retrieved to support the answer, contains source info, similarity score, and text."}, {"name": "FaqAnswerResponse", "description": "Response model for the generated answer, includes answer text, contexts, model name, and metadata."}], "methods": [{"name": "FaqAnswerResponse get_answer(payload: FaqAnswerRequest)", "description": "API endpoint function that takes a user query, retrieves relevant context chunks using RAG, generates an answer, and returns the response model.", "scope": "", "scopeKind": ""}], "calls": ["retrieve", "generate_with_context", "get_active_model"], "search-terms": ["FAQ", "RAG pipeline", "FastAPI endpoint", "faq.py", "AIService", "ContextChunk", "FaqAnswerRequest", "FaqAnswerResponse"], "state": 2, "file_id": 6, "knowledge_revision": 40, "git_revision": "", "revision_history": [{"14": ""}, {"40": ""}], "ctags": [{"_type": "tag", "name": "ContextChunk", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-search-and-control-panel-29944-29953/faq_bot_backend/src/api/routers/faq.py", "pattern": "/^class ContextChunk(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "FaqAnswerRequest", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-search-and-control-panel-29944-29953/faq_bot_backend/src/api/routers/faq.py", "pattern": "/^class FaqAnswerRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "FaqAnswerResponse", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-search-and-control-panel-29944-29953/faq_bot_backend/src/api/routers/faq.py", "pattern": "/^class FaqAnswerResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_ai_service", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-search-and-control-panel-29944-29953/faq_bot_backend/src/api/routers/faq.py", "pattern": "/^_ai_service = AIService()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_rag_pipeline", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-search-and-control-panel-29944-29953/faq_bot_backend/src/api/routers/faq.py", "pattern": "/^_rag_pipeline = RagPipeline(settings=_settings, ai_service=_ai_service)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_settings", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-search-and-control-panel-29944-29953/faq_bot_backend/src/api/routers/faq.py", "pattern": "/^_settings = get_settings()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "answer", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-search-and-control-panel-29944-29953/faq_bot_backend/src/api/routers/faq.py", "pattern": "/^    answer: str = Field(..., description=\"Generated answer from the AI model.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "FaqAnswerResponse", "scopeKind": "class"}, {"_type": "tag", "name": "contexts", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-search-and-control-panel-29944-29953/faq_bot_backend/src/api/routers/faq.py", "pattern": "/^    contexts: List[ContextChunk] = Field(default_factory=list, description=\"Retrieved supporting/", "language": "Python", "typeref": "typename:List[ContextChunk]", "kind": "variable", "scope": "FaqAnswerResponse", "scopeKind": "class"}, {"_type": "tag", "name": "get_answer", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-search-and-control-panel-29944-29953/faq_bot_backend/src/api/routers/faq.py", "pattern": "/^def get_answer(payload: FaqAnswerRequest) -> FaqAnswerResponse:$/", "language": "Python", "typeref": "typename:FaqAnswerResponse", "kind": "function", "signature": "(payload: FaqAnswerRequest)"}, {"_type": "tag", "name": "meta", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-search-and-control-panel-29944-29953/faq_bot_backend/src/api/routers/faq.py", "pattern": "/^    meta: Dict[str, Any] = Field(default_factory=dict, description=\"Additional metadata about th/", "language": "Python", "typeref": "typename:Dict[str, Any]", "kind": "variable", "scope": "FaqAnswerResponse", "scopeKind": "class"}, {"_type": "tag", "name": "model", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-search-and-control-panel-29944-29953/faq_bot_backend/src/api/routers/faq.py", "pattern": "/^    model: str = Field(..., description=\"Model used for generation.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "FaqAnswerResponse", "scopeKind": "class"}, {"_type": "tag", "name": "query", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-search-and-control-panel-29944-29953/faq_bot_backend/src/api/routers/faq.py", "pattern": "/^    query: str = Field(..., description=\"User question to be answered.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "FaqAnswerRequest", "scopeKind": "class"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-search-and-control-panel-29944-29953/faq_bot_backend/src/api/routers/faq.py", "pattern": "/^router = APIRouter()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "score", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-search-and-control-panel-29944-29953/faq_bot_backend/src/api/routers/faq.py", "pattern": "/^    score: float = Field(..., description=\"Similarity score.\")$/", "language": "Python", "typeref": "typename:float", "kind": "variable", "scope": "ContextChunk", "scopeKind": "class"}, {"_type": "tag", "name": "source", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-search-and-control-panel-29944-29953/faq_bot_backend/src/api/routers/faq.py", "pattern": "/^    source: str = Field(..., description=\"Source identifier of the context (e.g., filename or do/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "ContextChunk", "scopeKind": "class"}, {"_type": "tag", "name": "text", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-search-and-control-panel-29944-29953/faq_bot_backend/src/api/routers/faq.py", "pattern": "/^    text: str = Field(..., description=\"Context text snippet.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "ContextChunk", "scopeKind": "class"}, {"_type": "tag", "name": "top_k", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-search-and-control-panel-29944-29953/faq_bot_backend/src/api/routers/faq.py", "pattern": "/^    top_k: int = Field(3, description=\"Number of relevant context chunks to retrieve.\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "FaqAnswerRequest", "scopeKind": "class"}], "hash": "546326d86bc7eeff6662d137adc1ae78", "format-version": 4, "code-base-name": "faq_bot_backend", "filename": "faq_bot_backend/src/api/routers/faq.py", "fields": [{"name": "_ai_service = AIService()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "_rag_pipeline = RagPipeline(settings=_settings, ai_service=_ai_service)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "_settings = get_settings()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str answer", "scope": "FaqAnswerResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "List[ContextChunk] contexts", "scope": "FaqAnswerResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "Dict[str, Any] meta", "scope": "FaqAnswerResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "str model", "scope": "FaqAnswerResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "str query", "scope": "FaqAnswerRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "router = APIRouter()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "float score", "scope": "ContextChunk", "scopeKind": "class", "description": "unavailable"}, {"name": "str source", "scope": "ContextChunk", "scopeKind": "class", "description": "unavailable"}, {"name": "str text", "scope": "ContextChunk", "scopeKind": "class", "description": "unavailable"}, {"name": "int top_k", "scope": "FaqAnswerRequest", "scopeKind": "class", "description": "unavailable"}]}